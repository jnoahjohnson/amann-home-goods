{
  "version": 3,
  "sources": ["../../app/routes/$page.tsx"],
  "sourcesContent": ["import type { LoaderArgs, MetaFunction } from \"@remix-run/node\";\nimport ProductGrid from \"~/components/ProductGrid\";\nimport { Link } from \"react-router-dom\";\nimport Links from \"~/components/Links\";\nimport { useLoaderData, useParams } from \"@remix-run/react\";\n\nexport const meta: MetaFunction = () => {\n  return {\n    title: \"Amann Home Goods\",\n    description: \"Incredible products for your incredible home.\",\n  };\n};\n\nexport let loader = async ({ request }: LoaderArgs) => {\n  const params = {\n    api_key: \"09983A5D1D46484A86D22881C205957A\",\n    type: \"seller_products\",\n    amazon_domain: \"amazon.com\",\n    seller_id: \"A1EEYPEVF7DX6F\",\n  };\n\n  let url = new URL(request.url);\n  let page = url.searchParams.get(\"page\") ?? \"1\";\n\n  let data = await fetch(\n    `https://api.rainforestapi.com/request?api_key=${params.api_key}&type=${params.type}&amazon_domain=${params.amazon_domain}&seller_id=${params.seller_id}&page=${page}`\n  );\n\n  let jsonData = await data.json();\n\n  console.log(jsonData);\n\n  let body = JSON.stringify({\n    products: jsonData.seller_products ?? null,\n    numPages: 1,\n  });\n\n  console.log(\"body\", body);\n\n  return new Response(body, {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Cache-Control\": `public, max-age=${60 * 10}, s-maxage=${60 * 60 * 24}`,\n    },\n  });\n};\n\nexport function headers() {\n  return {\n    \"Cache-Control\": \"max-age=3600, s-maxage=28800\",\n  };\n}\n\nexport default function PageComponent() {\n  let { products, numPages } = useLoaderData<typeof loader>();\n  let { page } = useParams();\n\n  console.log(numPages, page);\n\n  if (typeof page !== \"string\") {\n    return <div>Error</div>;\n  }\n\n  return (\n    <div className=\"mx-auto max-w-6xl py-4\">\n      <Links />\n      <ProductGrid products={products} />\n      <ul className=\"w-full flex items-center justify-between pt-1 pb-4 max-w-7xl mx-auto overflow-hidden mt-2\">\n        {parseInt(page) > 1 ? (\n          <li>\n            <Link\n              to={`/${parseInt(page) - 1}`}\n              className=\"px-2 py-1 bg-white text-lg text-gray-800 rounded\"\n            >\n              {\"<\"} Previous Page\n            </Link>\n          </li>\n        ) : (\n          <li></li>\n        )}\n        {parseInt(page) + 1 <= parseInt(numPages) ? (\n          <li>\n            <Link\n              to={`/${parseInt(page) + 1}`}\n              className=\"px-2 py-1 bg-white text-lg text-gray-800 rounded\"\n            >\n              Next Page &gt;\n            </Link>\n          </li>\n        ) : null}\n      </ul>\n    </div>\n  );\n}\n\nexport function ErrorBoundary() {\n  return (\n    <div className=\"w-full text-center px-2 mt-10\">\n      <h1 className=\"text-xl\">\n        There was an issue getting the products. Please try again later or check\n        out our links above.\n      </h1>\n    </div>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;AAEA;AA0DW;AAtDJ,IAAM,OAAqB,MAAM;AACtC,SAAO;AAAA,IACL,OAAO;AAAA,IACP,aAAa;AAAA,EACf;AACF;AA0Ce,SAAR,gBAAiC;AACtC,MAAI,EAAE,UAAU,SAAS,IAAI,cAA6B;AAC1D,MAAI,EAAE,KAAK,IAAI,UAAU;AAEzB,UAAQ,IAAI,UAAU,IAAI;AAE1B,MAAI,OAAO,SAAS,UAAU;AAC5B,WAAO,mDAAC,SAAI,qBAAL;AAAA;AAAA;AAAA;AAAA,WAAU;AAAA,EACnB;AAEA,SACE,mDAAC,SAAI,WAAU,0BACb;AAAA,uDAAC,WAAD;AAAA;AAAA;AAAA;AAAA,WAAO;AAAA,IACP,mDAAC,eAAY,YAAb;AAAA;AAAA;AAAA;AAAA,WAAiC;AAAA,IACjC,mDAAC,QAAG,WAAU,6FACX;AAAA,eAAS,IAAI,IAAI,IAChB,mDAAC,QACC;AAAA,QAAC;AAAA;AAAA,UACC,IAAI,IAAI,SAAS,IAAI,IAAI;AAAA,UACzB,WAAU;AAAA,UAET;AAAA;AAAA,YAAI;AAAA;AAAA;AAAA,QAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAKA,KANF;AAAA;AAAA;AAAA;AAAA,aAOA,IAEA,mDAAC,UAAD;AAAA;AAAA;AAAA;AAAA,aAAI;AAAA,MAEL,SAAS,IAAI,IAAI,KAAK,SAAS,QAAQ,IACtC,mDAAC,QACC;AAAA,QAAC;AAAA;AAAA,UACC,IAAI,IAAI,SAAS,IAAI,IAAI;AAAA,UACzB,WAAU;AAAA,UACX;AAAA;AAAA,QAHD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAKA,KANF;AAAA;AAAA;AAAA;AAAA,aAOA,IACE;AAAA,SAtBN;AAAA;AAAA;AAAA;AAAA,WAuBA;AAAA,OA1BF;AAAA;AAAA;AAAA;AAAA,SA2BA;AAEJ;AAEO,SAAS,gBAAgB;AAC9B,SACE,mDAAC,SAAI,WAAU,iCACb,6DAAC,QAAG,WAAU,WAAU,6GAAxB;AAAA;AAAA;AAAA;AAAA,SAGA,KAJF;AAAA;AAAA;AAAA;AAAA,SAKA;AAEJ;",
  "names": []
}
