{
  "version": 3,
  "sources": ["empty-module:~/services/redis.server", "../../app/routes/index.tsx", "../../app/components/FeaturedProduct.tsx"],
  "sourcesContent": ["module.exports = {};", "import type {\n  MetaFunction,\n  LoaderArgs,\n  HeadersFunction,\n} from \"@remix-run/node\";\nimport ProductGrid from \"~/components/ProductGrid\";\nimport { Link } from \"react-router-dom\";\nimport FeaturedProduct from \"~/components/FeaturedProduct\";\nimport Links from \"~/components/Links\";\nimport { useLoaderData } from \"@remix-run/react\";\nimport { getDataFromRedis, saveToRedis } from \"~/services/redis.server\";\n\nexport const meta: MetaFunction = () => {\n  return {\n    title: \"Amann Home Goods\",\n    description: \"Incredible products for your incredible home.\",\n  };\n};\n\nexport let loader = async ({ request }: LoaderArgs) => {\n  const cacheData = await getDataFromRedis();\n\n  if (cacheData) {\n    return new Response(cacheData, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Cache-Control\": `public, max-age=${60 * 10}, s-maxage=${60 * 60 * 24}`,\n      },\n    });\n  }\n\n  const params = {\n    api_key: \"09983A5D1D46484A86D22881C205957A\",\n    type: \"seller_products\",\n    amazon_domain: \"amazon.com\",\n    seller_id: \"A1EEYPEVF7DX6F\",\n  };\n\n  let url = new URL(request.url);\n  let page = url.searchParams.get(\"page\") ?? \"1\";\n\n  let data = await fetch(\n    `https://api.rainforestapi.com/request?api_key=${params.api_key}&type=${params.type}&amazon_domain=${params.amazon_domain}&seller_id=${params.seller_id}&page=${page}`\n  );\n\n  let jsonData = await data.json();\n\n  let body = JSON.stringify({\n    products: jsonData.seller_products ?? null,\n    numPages: 1,\n  });\n\n  saveToRedis(jsonData.seller_products);\n\n  return new Response(body, {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Cache-Control\": `public, max-age=${60 * 10}, s-maxage=${60 * 60 * 24}`,\n    },\n  });\n};\n\nexport let headers: HeadersFunction = ({ loaderHeaders }) => {\n  return {\n    \"Cache-Control\": loaderHeaders.get(\"Cache-Control\") || \"\",\n  };\n};\n\nexport default function Index() {\n  let { products, numPages } = useLoaderData<typeof loader>();\n\n  console.log(numPages);\n\n  return (\n    <div className=\"mx-auto max-w-6xl py-4 px-6\">\n      <div className=\"grid grid-cols-1 gap-2 md:grid-cols-2\">\n        <FeaturedProduct\n          title=\"Reusable Silicone Drinking Straws\"\n          link=\"https://www.amazon.com/Reusable-Silicone-Drinking-Cleaning-Eco-Friendly/dp/B09PRPYLGG/ref=sr_1_6?m=A1EEYPEVF7DX6F&qid=1646346663&s=merchant-items&sr=1-6&tag=amannhomego04-20\"\n          image=\"/images/straws.jpg\"\n        />\n        <FeaturedProduct\n          title=\"Air Fryer Paper Liners\"\n          link=\"https://www.amazon.com/dp/B09PYF7YFG?&linkCode=sl1&tag=amannhomego04-20&linkId=2ae2a165f73e3c2ad08166b6a92615da&language=en_US&ref_=as_li_ss_tl\"\n          image=\"https://m.media-amazon.com/images/I/31b9CuuxsVL._AC_.jpg\"\n        />\n      </div>\n      <Links />\n      <h1 className=\"font-bold text-4xl pt-6 pb-4\">All Products</h1>\n      <ProductGrid products={products} />\n      <div className=\"max-w-7xl mx-auto overflow-hidden flex items-center justify-between mt-2\">\n        <div></div>\n        {numPages > 1 ? (\n          <Link\n            to=\"/2\"\n            className=\"px-2 py-1 bg-white text-gray-800 rounded text-lg\"\n          >\n            Next Page &gt;\n          </Link>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n\nexport function ErrorBoundary() {\n  return (\n    <div className=\"w-full text-center px-2 mt-10\">\n      <h1 className=\"text-xl\">\n        There was an issue getting the products. Please try again later or check\n        out our links above.\n      </h1>\n    </div>\n  );\n}\n", "export default function FeaturedProduct({\n  title,\n  link,\n  image,\n}: {\n  title: string;\n  link: string;\n  image: string;\n}) {\n  return (\n    <div className=\"relative w-full h-[300px] bg-white p-8 rounded shadow overflow-hidden\">\n      <div className=\"h-full flex flex-col justify-center items-start z-40 relative\">\n        <p className=\"font-bold text-lg text-sky-800\">New Arrival!</p>\n        <h1 className=\"text-5xl mb-3  max-w-lg\">{title}</h1>\n        <a\n          href={link}\n          target=\"_blank\"\n          className=\"text-white bg-sky-800 px-3 py-1 rounded shadow font-bold text-xl\"\n        >\n          Buy Now\n        </a>\n      </div>\n      <img\n        src={image}\n        className=\"absolute right-12 -bottom-2 rotate-2 w-64 z-10\"\n      />\n      <div className=\"absolute z-10 inset-0 w-full h-full bg-white opacity-30\" />\n    </div>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;AAAA;AAAA;AAAA,WAAO,UAAU,CAAC;AAAA;AAAA;;;ACMlB;;;ACMQ;AAZO,SAAR,gBAAiC;AAAA,EACtC;AAAA,EACA;AAAA,EACA;AACF,GAIG;AACD,SACE,mDAAC,SAAI,WAAU,yEACb;AAAA,uDAAC,SAAI,WAAU,iEACb;AAAA,yDAAC,OAAE,WAAU,kCAAiC,4BAA9C;AAAA;AAAA;AAAA;AAAA,aAA0D;AAAA,MAC1D,mDAAC,QAAG,WAAU,2BAA2B,mBAAzC;AAAA;AAAA;AAAA;AAAA,aAA+C;AAAA,MAC/C;AAAA,QAAC;AAAA;AAAA,UACC,MAAM;AAAA,UACN,QAAO;AAAA,UACP,WAAU;AAAA,UACX;AAAA;AAAA,QAJD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMA;AAAA,SATF;AAAA;AAAA;AAAA;AAAA,WAUA;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACC,KAAK;AAAA,QACL,WAAU;AAAA;AAAA,MAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAGA;AAAA,IACA,mDAAC,SAAI,WAAU,6DAAf;AAAA;AAAA;AAAA;AAAA,WAAyE;AAAA,OAhB3E;AAAA;AAAA;AAAA;AAAA,SAiBA;AAEJ;;;ADnBA,mBAA8C;AAkEtC,IAAAA,0BAAA;AAhED,IAAM,OAAqB,MAAM;AACtC,SAAO;AAAA,IACL,OAAO;AAAA,IACP,aAAa;AAAA,EACf;AACF;AAmDe,SAAR,QAAyB;AAC9B,MAAI,EAAE,UAAU,SAAS,IAAI,cAA6B;AAE1D,UAAQ,IAAI,QAAQ;AAEpB,SACE,oDAAC,SAAI,WAAU,+BACb;AAAA,wDAAC,SAAI,WAAU,yCACb;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAM;AAAA,UACN,MAAK;AAAA,UACL,OAAM;AAAA;AAAA,QAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAIA;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAM;AAAA,UACN,MAAK;AAAA,UACL,OAAM;AAAA;AAAA,QAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAIA;AAAA,SAVF;AAAA;AAAA;AAAA;AAAA,WAWA;AAAA,IACA,oDAAC,WAAD;AAAA;AAAA;AAAA;AAAA,WAAO;AAAA,IACP,oDAAC,QAAG,WAAU,gCAA+B,4BAA7C;AAAA;AAAA;AAAA;AAAA,WAAyD;AAAA,IACzD,oDAAC,eAAY,YAAb;AAAA;AAAA;AAAA;AAAA,WAAiC;AAAA,IACjC,oDAAC,SAAI,WAAU,4EACb;AAAA,0DAAC,WAAD;AAAA;AAAA;AAAA;AAAA,aAAK;AAAA,MACJ,WAAW,IACV;AAAA,QAAC;AAAA;AAAA,UACC,IAAG;AAAA,UACH,WAAU;AAAA,UACX;AAAA;AAAA,QAHD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAKA,IACE;AAAA,SATN;AAAA;AAAA;AAAA;AAAA,WAUA;AAAA,OA1BF;AAAA;AAAA;AAAA;AAAA,SA2BA;AAEJ;AAEO,SAAS,gBAAgB;AAC9B,SACE,oDAAC,SAAI,WAAU,iCACb,8DAAC,QAAG,WAAU,WAAU,6GAAxB;AAAA;AAAA;AAAA;AAAA,SAGA,KAJF;AAAA;AAAA;AAAA;AAAA,SAKA;AAEJ;",
  "names": ["import_jsx_dev_runtime"]
}
